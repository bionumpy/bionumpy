

# convert_fastq_to_fasta
# strip_starts_and_ends

## Bacterial
## 

# Main entrypoint of the workflow. 
# Please follow the best practices: 
# https://snakemake.readthedocs.io/en/stable/snakefiles/best_practices.html,
# in particular regarding the standardized folder structure mentioned there.
import plotly.express as px
import bionumpy as bnp
from bionumpy.arithmetics import intersect
configfile: "config.yml"
include: "rules/reports.smk"
include: "rules/simulation.smk"
include: "rules/translate.smk"
include: "rules/kmer_counting.smk"
include: "rules/reverse_complement.smk"
include: "rules/interval_intersection.smk"


rule all:
    input:
        "report_big.md",
        "report_small.md"


rule main_report:
    input:
        "results/reports/translate/{run_size}.png",
        "results/reports/intersect/{run_size}.png",
        "results/reports/reverse_complement/{run_size}.png",
    output:
        "report_{run_size}.md"
    run:
        # make a simple report with the plots
        out = "# Benchmark report \n\n"
        out += "\n\n".join("![](" + image + ")" for image in input)
        with open(output[0], "w") as f:
            f.write(out)

